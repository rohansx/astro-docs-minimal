---
/**
 * Astro Docs Minimal - Main Documentation Layout
 * A clean, minimal documentation layout with sidebar navigation and search
 */
import '../styles/global.css';
import DocsSearch from '../components/DocsSearch.astro';
import { docsConfig, type DocsConfig } from '../lib/docs-config';

interface Props {
  title: string;
  description?: string;
  config?: DocsConfig;
}

const { title, description, config = docsConfig } = Astro.props;
const currentPath = Astro.url.pathname.replace(/\/$/, '');
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title} | {config.title}</title>
    {description && <meta name="description" content={description} />}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  </head>
  <body class="min-h-screen bg-slate-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="flex flex-col lg:flex-row gap-8">
        <aside class="lg:w-64 flex-shrink-0">
          <div class="lg:sticky lg:top-24">
            <nav class="space-y-6 bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
              {config.navigation.map((section) => (
                <div>
                  <h3 class="text-xs font-semibold text-slate-900 uppercase tracking-wider mb-3 px-3">
                    {section.section}
                  </h3>
                  <ul class="space-y-1 pl-2">
                    {section.links.map((link) => (
                      <li>
                        <a
                          href={link.href}
                          class={`block pl-4 pr-3 py-2 rounded-md text-sm font-medium transition-colors ${
                            currentPath === link.href || currentPath === link.href + '/'
                              ? 'bg-yellow-50 text-yellow-900 font-semibold border border-yellow-200'
                              : 'text-slate-700 hover:bg-slate-100 hover:text-slate-900'
                          }`}
                        >
                          {link.title}
                        </a>
                      </li>
                    ))}
                  </ul>
                </div>
              ))}
            </nav>
          </div>
        </aside>

        <main class="flex-1 min-w-0">
          <div class="mt-8">
            <DocsSearch />
          </div>

          <article class="bg-white rounded-lg border border-slate-200 shadow-sm p-8 lg:p-12" data-pagefind-body>
            <div class="prose prose-slate prose-lg max-w-none
              prose-headings:font-sans prose-headings:text-slate-900
              prose-h1:text-4xl prose-h1:font-bold prose-h1:mb-8 prose-h1:mt-0 prose-h1:pb-4 prose-h1:border-b prose-h1:border-slate-200
              prose-h2:text-3xl prose-h2:font-semibold prose-h2:mt-12 prose-h2:mb-4 prose-h2:pb-3 prose-h2:border-b prose-h2:border-slate-100
              prose-h3:text-2xl prose-h3:font-semibold prose-h3:mt-8 prose-h3:mb-3
              prose-h4:text-xl prose-h4:font-semibold prose-h4:mt-6 prose-h4:mb-2
              prose-p:text-slate-700 prose-p:leading-relaxed prose-p:mb-4
              prose-a:text-blue-600 prose-a:no-underline prose-a:font-medium hover:prose-a:underline
              prose-strong:text-slate-900 prose-strong:font-semibold
              prose-code:text-blue-700 prose-code:bg-blue-50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm
              prose-pre:bg-slate-900 prose-pre:text-slate-100 prose-pre:border prose-pre:rounded-lg prose-pre:my-6
              prose-ul:my-6 prose-ul:list-disc prose-ul:pl-6
              prose-ol:my-6 prose-ol:list-decimal prose-ol:pl-6
              prose-li:text-slate-700 prose-li:leading-relaxed
              prose-blockquote:border-l-4 prose-blockquote:border-blue-500 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:bg-blue-50 prose-blockquote:py-2 prose-blockquote:my-6
              prose-img:rounded-lg prose-img:shadow-lg prose-img:my-8
              prose-hr:border-slate-200 prose-hr:my-8">
              <slot />
            </div>
          </article>
        </main>
      </div>
    </div>
  </body>
</html>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>
